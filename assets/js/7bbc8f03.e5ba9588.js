"use strict";(globalThis.webpackChunkthoughtjack_docs_site=globalThis.webpackChunkthoughtjack_docs_site||[]).push([[2404],{6555(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"how-to/configure-behaviors","title":"Configure Delivery Behaviors","description":"Set up slow-loris, unbounded-line, and other response delivery modes","source":"@site/docs/how-to/configure-behaviors.mdx","sourceDirName":"how-to","slug":"/how-to/configure-behaviors","permalink":"/docs/how-to/configure-behaviors","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Configure Delivery Behaviors","sidebar_position":3,"description":"Set up slow-loris, unbounded-line, and other response delivery modes"},"sidebar":"docs","previous":{"title":"How-To Guides","permalink":"/docs/how-to/"},"next":{"title":"Configure Side Effects","permalink":"/docs/how-to/configure-side-effects"}}');var r=i(4848),o=i(8453);const t={title:"Configure Delivery Behaviors",sidebar_position:3,description:"Set up slow-loris, unbounded-line, and other response delivery modes"},l="Configure Delivery Behaviors",d={},a=[{value:"Available behaviors",id:"available-behaviors",level:2},{value:"Set behavior in config",id:"set-behavior-in-config",level:2},{value:"Set behavior via CLI",id:"set-behavior-via-cli",level:2},{value:"Slow loris",id:"slow-loris",level:2},{value:"Unbounded line",id:"unbounded-line",level:2},{value:"Nested JSON",id:"nested-json",level:2},{value:"Response delay",id:"response-delay",level:2},{value:"Behavior scoping",id:"behavior-scoping",level:2},{value:"Combining with side effects",id:"combining-with-side-effects",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"configure-delivery-behaviors",children:"Configure Delivery Behaviors"})}),"\n",(0,r.jsxs)(n.p,{children:["Delivery behaviors control ",(0,r.jsx)(n.strong,{children:"how"})," ThoughtJack transmits responses to the MCP client. They operate at the transport level, modifying timing, framing, or structure of the response bytes."]}),"\n",(0,r.jsx)(n.h2,{id:"available-behaviors",children:"Available behaviors"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Behavior"}),(0,r.jsx)(n.th,{children:"Effect"}),(0,r.jsx)(n.th,{children:"Transport"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"normal"})}),(0,r.jsx)(n.td,{children:"Standard immediate delivery"}),(0,r.jsx)(n.td,{children:"stdio, HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"slow_loris"})}),(0,r.jsx)(n.td,{children:"Byte-by-byte drip with delay"}),(0,r.jsx)(n.td,{children:"stdio, HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"unbounded_line"})}),(0,r.jsx)(n.td,{children:"No newline terminator"}),(0,r.jsx)(n.td,{children:"stdio, HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"nested_json"})}),(0,r.jsx)(n.td,{children:"Wrap in deeply nested JSON"}),(0,r.jsx)(n.td,{children:"stdio, HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"response_delay"})}),(0,r.jsx)(n.td,{children:"Fixed delay before response"}),(0,r.jsx)(n.td,{children:"stdio, HTTP"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"set-behavior-in-config",children:"Set behavior in config"}),"\n",(0,r.jsxs)(n.p,{children:["Add a ",(0,r.jsx)(n.code,{children:"behavior"})," block to your YAML:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"behavior:\n  delivery:\n    type: slow_loris\n    byte_delay_ms: 100\n    chunk_size: 1\n"})}),"\n",(0,r.jsx)(n.h2,{id:"set-behavior-via-cli",children:"Set behavior via CLI"}),"\n",(0,r.jsx)(n.p,{children:"Override the config's delivery behavior at runtime:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"thoughtjack server run --config my_config.yaml --behavior slow-loris\n"})}),"\n",(0,r.jsx)(n.p,{children:"CLI override takes precedence over config-level behavior."}),"\n",(0,r.jsx)(n.h2,{id:"slow-loris",children:"Slow loris"}),"\n",(0,r.jsx)(n.p,{children:"Delivers the response one byte (or chunk) at a time with a configurable delay between chunks. Tests client timeout handling and streaming resilience."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"behavior:\n  delivery:\n    type: slow_loris\n    byte_delay_ms: 100    # milliseconds between chunks\n    chunk_size: 1         # bytes per chunk\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What to test"}),": Does the client timeout? Does it accumulate partial responses correctly? Does it display partial content to the user?"]}),"\n",(0,r.jsx)(n.h2,{id:"unbounded-line",children:"Unbounded line"}),"\n",(0,r.jsx)(n.p,{children:"Sends the response without a trailing newline. JSON-RPC over stdio expects newline-delimited messages \u2014 omitting it tests whether the client handles missing terminators."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'behavior:\n  delivery:\n    type: unbounded_line\n    target_bytes: 65536    # total padding size\n    padding_char: " "      # character used for padding\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What to test"}),": Does the client hang waiting for a newline? Does it apply a size limit?"]}),"\n",(0,r.jsx)(n.h2,{id:"nested-json",children:"Nested JSON"}),"\n",(0,r.jsx)(n.p,{children:"Wraps the response in deeply nested JSON objects, testing the client's JSON parser for stack depth limits."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'behavior:\n  delivery:\n    type: nested_json\n    depth: 1000           # nesting levels\n    key: "data"           # key name at each level\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What to test"}),": Does the parser crash? Does it apply a depth limit?"]}),"\n",(0,r.jsx)(n.h2,{id:"response-delay",children:"Response delay"}),"\n",(0,r.jsx)(n.p,{children:"Adds a fixed delay before sending the response. Simpler than slow loris \u2014 tests basic timeout configuration."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"behavior:\n  delivery:\n    type: response_delay\n    delay_ms: 5000        # milliseconds before response\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What to test"}),": Does the client timeout? Does it show a loading state?"]}),"\n",(0,r.jsx)(n.h2,{id:"behavior-scoping",children:"Behavior scoping"}),"\n",(0,r.jsx)(n.p,{children:"Behaviors can be set at multiple levels. The resolution order (highest priority first):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI override"})," (",(0,r.jsx)(n.code,{children:"--behavior"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tool-level"})," (per-tool ",(0,r.jsx)(n.code,{children:"behavior"})," block)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Phase-level"})," (in phase configuration)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Baseline-level"})," (top-level ",(0,r.jsx)(n.code,{children:"behavior"})," block)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default"})," (",(0,r.jsx)(n.code,{children:"normal"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# Baseline behavior applies to all responses\nbehavior:\n  delivery:\n    type: response_delay\n    delay_ms: 1000\n\ntools:\n  - tool:\n      name: "fast_tool"\n    response:\n      content:\n        - type: text\n          text: "Quick response"\n    # No behavior override \u2014 uses baseline delay\n\n  - tool:\n      name: "slow_tool"\n    response:\n      content:\n        - type: text\n          text: "Slow response"\n    behavior:\n      delivery:\n        type: slow_loris\n        byte_delay_ms: 200\n'})}),"\n",(0,r.jsx)(n.h2,{id:"combining-with-side-effects",children:"Combining with side effects"}),"\n",(0,r.jsx)(n.p,{children:"Delivery behaviors and side effects are independent. You can combine them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"behavior:\n  delivery:\n    type: slow_loris\n    byte_delay_ms: 50\n  side_effects:\n    - type: notification_flood\n      rate_per_second: 10\n      duration_ms: 5000\n"})}),"\n",(0,r.jsx)(n.p,{children:"This delivers the response slowly while simultaneously flooding the client with notifications."})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>l});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);